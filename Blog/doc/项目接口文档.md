### 接口文档

项目主域名：https://xiaoyin.live

接口目录：

一、用户管理

1、[用户注册](#1)

2、[用户登录](#2)

3、[用户详情](#3)

4、[生成邀请码](#4)

二、标签管理

1、[标签列表](#5)

2、[创建标签](#6)

3、[修改标签](#7)

4、[标签详情](#8)

5、[删除标签](#9)

三、文章管理

1、[创建文章](#10)

2、[修改文章](#11)

3、[获取文章详情](#12)

4、[删除文章](#13)

5、[获取所有文章](#14)

6、[图片上传](#15)



##### <a id="1">1、用户注册</a>

请求方式：POST

接口地址：/v1/account/register

接口说明：用于系统用户的注册，本项目的用户注册需要*邀请码*方可注册，可通过微信群就行索取。

请求参数：Body参数（multipart/form-data）

| 参数名      | 类型   | 必填 | 说明                  |
| :---------- | :----- | :--- | :-------------------- |
| name        | string | 是   | 示例值：张三          |
| mobile      | string | 是   | 示例值：13523422344   |
| password    | string | 是   | 示例值：kaiyuan10nian |
| recommender | string | 是   | 示例值：13523422343   |
| code        | string | 是   | 示例值：Vrvmw         |

系统返回：

```go
{
"code":422,
"data":NULL,
"msg":"用户已经存在"
}
```

##### <a id="2">2、用户登录</a>

请求方式：POST

接口地址：/v1/account/login

接口说明：用于系统用户的登录，登录成功后颁发的token有效期是7天。

请求参数：Body参数（multipart/form-data）

| 参数名   | 类型   | 必填 | 说明                |
| :------- | :----- | :--- | :------------------ |
| mobile   | string | 是   | 示例值：13812314213 |
| password | string | 是   | 示例值：wodemima    |

登录成功：

```go
{
"code":200,
"data":{
"token":"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJVc2VySWQiO..."
},
"msg":"登录成功"
}
```

##### <a id="3">3、获取个人信息</a>

请求方式：GET

接口地址：/v1/account/info

接口说明：用户获取用户自己的个人信息

请求参数：Auth携带Token

返回结果：

```go
{
    "code": 200,
    "data": {
        "user": {
            "id": 1,
            "name": "kaiyuan",
            "telephone": "13812344321"
        }
    },
    "msg": "请求成功"
}
```

##### <a id="4">4、生成邀请码</a>

请求方式：GET

接口地址：/v1/account/invite

接口说明：每个用户都可以生成自己专属的邀请码给自己的朋友使用，系统会自动绑定邀请人与被邀请人的关系。

请求参数：Auth携带Token

返回结果：

```go
{
    "code": 6000,
    "data": {
        "inviteCode": "czn26"
    },
    "msg": "邀请码生成成功"
}
```

##### <a id="5">5、标签列表</a>

请求方式：GET

接口地址：/v1/tags/list

接口说明：获取所有的标签

请求参数：Auth携带Token

返回结果：

```go
{
    "code": 200,
    "data": {
        "tags": [
            {
                "ID": 1,
                "CreatedAt": "2022-09-04T17:05:20+08:00",
                "UpdatedAt": "2022-09-04T17:05:20+08:00",
                "DeletedAt": null,
                "tagname": "新闻"
            }
        ],
        "total": 1
    },
    "msg": ""
}
```



##### <a id="6">6、创建标签</a>

请求方式：POST

接口地址：/v1/tags

接口说明：创建标签，后面给文章分组用。

请求参数：Body参数（multipart/form-data），Auth携带Token

| 参数名  | 类型   | 必填 | 说明         |
| :------ | :----- | :--- | :----------- |
| TagName | string | 是   | 示例值：新闻 |

返回结果：

```go
{
    "code": 200,
    "data": {
        "tag": {
            "ID": 1,
            "CreatedAt": "2022-09-04T17:05:20.406250806+08:00",
            "UpdatedAt": "2022-09-04T17:05:20.406250806+08:00",
            "DeletedAt": null,
            "tagname": "新闻"
        }
    },
    "msg": ""
}
```

##### <a id="7">7、修改标签</a>

请求方式：PUT

接口地址：/v1/tags/:id（ID为标签在数据库表中的ID）

接口说明：修改标签

请求参数：Body参数（multipart/form-data），Auth携带Token

| 参数名  | 类型   | 必填 | 说明         |
| :------ | :----- | :--- | :----------- |
| TagName | string | 是   | 示例值：娱乐 |

返回结果：

```go
{
    "code": 200,
    "data": {
        "tag": {
            "ID": 1,
            "CreatedAt": "2022-09-04T17:05:20+08:00",
            "UpdatedAt": "2022-09-04T17:17:28.994913197+08:00",
            "DeletedAt": null,
            "tagname": "娱乐"
        }
    },
    "msg": "修改成功"
}
```

##### <a id="8">8、标签详情</a>

请求方式：GET

接口地址：/v1/tags/:id（ID为标签在数据库表中的ID）

接口说明：显示标签的详情

请求参数：Auth携带Token

返回结果：

```go
{
    "code": 200,
    "data": {
        "tag": {
            "ID": 1,
            "CreatedAt": "2022-09-04T17:05:20+08:00",
            "UpdatedAt": "2022-09-04T17:17:29+08:00",
            "DeletedAt": null,
            "tagname": "娱乐"
        }
    },
    "msg": ""
}
```

##### <a id="9">9、删除标签</a>

请求方式：DELETE

接口地址：/v1/tags/:id（ID为标签在数据库表中的ID）

接口说明：删除标签

请求参数：Auth携带Token

返回结果：

```go
{
    "code": 200,
    "data": null,
    "msg": "删除成功"
}
```

##### <a id="10">10、创建文章</a>

请求方式：POST

接口地址：/v1/article

接口说明：创建文章

请求参数：Body参数（multipart/form-data），Auth携带Token

| 参数名  | 类型   | 必填 | 说明             |
| :------ | :----- | :--- | :--------------- |
| Title   | string | 是   | 示例值：我是标题 |
| Content | string | 是   | 示例值：我是内容 |

返回结果：

```json
{
    "code": 200,
    "data": {
        "articleContent": {
            "ID": 2,
            "user_id": 1,
            "title": "我是标题",
            "content": "我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容",
            "created_at": "2022-09-08 09:10:24",
            "updated_at": "2022-09-08 09:10:24"
        }
    },
    "msg": "文章发表成功"
}
```

##### <a id="11">11、修改文章</a>

请求方式：PUT

接口地址：/v1/article/:id（ID为文章在数据库表中的ID）

接口说明：修改文章

请求参数：Body参数（multipart/form-data），Auth携带Token

| 参数名  | 类型   | 必填 | 说明                  |
| :------ | :----- | :--- | :-------------------- |
| Title   | string | 否   | 示例值：文章标题-修改 |
| Content | string | 否   | 示例值：文章内容-修改 |

返回结果：

```json
{
    "code": 200,
    "data": {
        "title": {
            "ID": 2,
            "user_id": 1,
            "title": "文章标题-修改",
            "content": "文章内容-修改",
            "created_at": "2022-09-08 09:10:25",
            "updated_at": "2022-09-08 09:18:21"
        }
    },
    "msg": "修改成功"
}
```

##### <a id="12">12、文章详情</a>

请求方式：GET

接口地址：/v1/article/1（ID为文章在数据库表中的ID）

接口说明：显示文章的详情

请求参数：Auth携带Token

返回结果：

```json
{
    "code": 200,
    "data": {
        "article": {
            "ID": 2,
            "user_id": 1,
            "title": "文章标题-修改",
            "content": "文章内容-修改",
            "created_at": "2022-09-08 09:10:25",
            "updated_at": "2022-09-08 09:18:22"
        }
    },
    "msg": ""
}
```

##### <a id="13">13、删除文章</a>

请求方式：DELETE

接口地址：/v1/article/1（ID为文章在数据库表中的ID）

接口说明：删除文章

请求参数：Auth携带Token

返回结果：

```json
{
    "code": 200,
    "data": null,
    "msg": "删除成功"
}
```

##### <a id="14">14、文章列表</a>

请求方式：GET

接口地址：/v1/article/list

接口说明：获取所有的文章

请求参数：Auth携带Token

返回结果：

```json
{
    "code": 200,
    "data": {
        "articles": [
            {
                "ID": 3,
                "user_id": 1,
                "title": "我是标题",
                "content": "我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容",
                "created_at": "2022-09-08 09:22:51",
                "updated_at": "2022-09-08 09:22:51"
            },
            {
                "ID": 4,
                "user_id": 1,
                "title": "我是标题",
                "content": "我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容我是内容",
                "created_at": "2022-09-08 09:22:55",
                "updated_at": "2022-09-08 09:22:55"
            }
        ],
        "total": 2
    },
    "msg": ""
}
```

##### <a id="15">15、图片上传</a>

请求方式：POST 

接口地址：/v1/upload

接口说明：图片上传

请求参数：Auth携带Token

| 参数名 | 类型 | 必填 | 说明                                                    |
| :----- | :--- | :--- | :------------------------------------------------------ |
| file   | file | 否   | 示例值：file:///Users/my/Desktop/图片/kaiyuan10nian.jpg |

返回结果：

```json
{
    "code": 200,
    "data": {
        "imageurl": "https://xiaoyin.live/kaiyuan/upload/20220915/1663226979544991046.jpg"
    },
    "msg": "上传成功"
}
```

